<!DOCTYPE html>
<html>
<head>
	<title>咖啡店搜尋</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- 引入Google Maps API -->
	<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
	<script>
		var map, infoWindow;

		function initMap() {
			// 創建地圖對象
			map = new google.maps.Map(document.getElementById('map'), {
				center: {lat: 25.0426939, lng: 121.5191782}, // 初始中心點
				zoom: 15 // 初始縮放級別
			});

			// 創建信息窗口對象
			infoWindow = new google.maps.InfoWindow();

			// 當使用者點擊定位按鈕時，顯示用戶當前位置
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(function(position) {
					var pos = {
						lat: position.coords.latitude,
						lng: position.coords.longitude
					};

					// 將地圖中心點設置為用戶當前位置
					map.setCenter(pos);

					// 在用戶當前位置標註一個標記
					var marker = new google.maps.Marker({
						position: pos,
						map: map
					});

					// 設置信息窗口內容
					infoWindow.setContent('您的位置');
					infoWindow.open(map, marker);
				}, function() {
					handleLocationError(true, infoWindow, map.getCenter());
				});
			} else {
				handleLocationError(false, infoWindow, map.getCenter());
			}

			// 當使用者提交位置時，顯示周圍的咖啡店
			document.getElementById('submit').addEventListener('click', function() {
				var location = document.getElementById('location').value;
				var radius = document.getElementById('radius').value;

				// 使用Places API搜尋周圍的咖啡店
				var service = new google.maps.places.PlacesService(map);
				service.nearbySearch({
					location: map.getCenter(),
					radius: radius,
					type: ['cafe']
				}, function(results, status) {
					if (status === google.maps.places.PlacesServiceStatus.OK) {
						for (var i = 0; i < results.length; i++) {
							createMarker(results[i]);
						}
					}
				});
			});
		}

		// 創建標記和信息窗口
		function createMarker(place) {
			var marker = new google.maps.Marker({
				map: map,
				position: place.geometry.location
			});

			google.maps.event.addListener(marker, 'click', function() {
				infoWindow.setContent(place.name);
				infoWindow.open(map, this);
			});
		}

		// 定位失敗時的處理
